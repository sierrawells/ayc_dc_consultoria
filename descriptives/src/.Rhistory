description == "Theater" ~ "Teatro"))
n_osc_otro_tipo_total <- osc_classified %>%
filter(main_movement == "Otro tipo de ONG",
!rfc %in% rfc_donantes) %>%
pull(rfc) %>%
unique() %>%
length() %>%
as.character()
graf_n_osc_otro_tipo <- n_osc_otro_tipo %>%
ggplot(aes(y = reorder(description, n_osc), x = n_osc)) +
geom_col(fill = pal[1]) +
geom_label(aes(label = n_osc), family = labels_font,
hjust = -0.1, size = 3.5, fontface = "bold",
fill = "white", label.size = NA) +
labs(title = "Donatarias autorizadas clasificadas como 'Otro tipo de ONG', por principal actividad NTEE",
subtitle = paste0("De las ", n_osc_otro_tipo_total, " donatarias autorizadas clasificadas como 'Otro tipo de ONG'"),
y = "",
x = "",
caption = paste0(caption_informe_transparencia,
"\nSe incluyen únicamente las 20 actividades NTEE más comunes entre las OSC clasificadas como 'Otro tipo de ONG'")) +
scale_x_continuous(limits = c(0, max(n_osc_otro_tipo$n_osc) * 1.05)) +
tema_for_markdown +
theme(
axis.text.y = element_text(face = "plain"))
graf_n_osc_otro_tipo
n_osc_otro_tipo_total <- osc_classified %>%
filter(main_movement == "Otro tipo de ONG",
!rfc %in% rfc_donantes) %>%
pull(rfc) %>%
unique() %>%
length() %>%
comma()
graf_n_osc_otro_tipo <- n_osc_otro_tipo %>%
ggplot(aes(y = reorder(description, n_osc), x = n_osc)) +
geom_col(fill = pal[1]) +
geom_label(aes(label = n_osc), family = labels_font,
hjust = -0.1, size = 3.5, fontface = "bold",
fill = "white", label.size = NA) +
labs(title = "Donatarias autorizadas clasificadas como 'Otro tipo de ONG',\npor principal actividad NTEE",
subtitle = paste0("De las ", n_osc_otro_tipo_total, " donatarias autorizadas clasificadas como 'Otro tipo de ONG'"),
y = "",
x = "",
caption = paste0(caption_informe_transparencia,
"\nSe incluyen únicamente las 20 actividades NTEE más comunes entre las OSC clasificadas como 'Otro tipo de ONG'")) +
scale_x_continuous(limits = c(0, max(n_osc_otro_tipo$n_osc) * 1.05)) +
tema_for_markdown +
theme(
axis.text.y = element_text(face = "plain"))
graf_n_osc_otro_tipo
graf_n_osc_otro_tipo <- n_osc_otro_tipo %>%
ggplot(aes(y = reorder(description, n_osc), x = n_osc)) +
geom_col(fill = pal[1]) +
geom_label(aes(label = n_osc), family = labels_font,
hjust = -0.1, size = 3.5, fontface = "bold",
fill = "white", label.size = NA) +
labs(title = "Donatarias autorizadas clasificadas como 'Otro tipo de ONG',\npor principal actividad NTEE",
subtitle = paste0("De las ", n_osc_otro_tipo_total, " donatarias autorizadas clasificadas como 'Otro tipo de ONG'"),
y = "",
x = "",
caption = paste0(caption_informe_transparencia,
"\nSe incluyen únicamente las 20 actividades NTEE más comunes entre las OSC clasificadas como 'Otro tipo de ONG'")) +
scale_x_continuous(limits = c(0, max(n_osc_otro_tipo$n_osc) * 1.05)) +
tema_for_markdown +
theme(
axis.text.y = element_text(face = "plain"))
for (device in devices){
ggsave(graf_n_osc_otro_tipo,
filename = paste0(paths$output, "n_osc_otro_tipo.", device),
width = 14, height = 10)
walk(paste0(paths$output, "n_osc_otro_tipo.", device),
~add_both_logos(.x, escala = 7))
}
#
# Author: SW
# Maintainer(s): SW, PB, IS
# License:  Data Cívica 2025 ©
# ---------------------------------------------
# TODO
# Packages
if(!require(pacman)) install.packages("pacman")
pacman::p_load(tidyverse, here, googledrive, readxl, janitor, scales, ggtext)
# Files ====
paths <- list(output = here("descriptives/output/"),
tema = here("descriptives/tema.R"))
drive_auth(email = "sierra.wells@datacivica.org")
# Informe de transparencia 2024
informe_transparencia_id <- drive_ls(as_id("1C1nq47Q8fnMRaVa1wMeZb1ZIpIRl-Pt0")) %>%
filter(str_detect(name, "2024")) %>%
pull(id)
stopifnot(length(informe_transparencia_id) == 1)
# OSC classifications
osc_classified_id <- drive_ls(as_id("16CVo8XsSrjyMQyoS2g5R-yPIQhV5nGjm")) %>%
filter(str_detect(name, "movements_classified_joined.csv")) %>%
pull(id)
stopifnot(length(osc_classified_id) == 1)
# NTEE codes
ntee_codes_id <- as_id("1sfAAFigzHYpM99F73xkaPUaatKiq7Rt4PUjYxDTAF4s")
# READ DATA ====
# Informe de transparencia 2024
drive_download(informe_transparencia_id,
path = paste0(tempdir(), "/informe_transparencia_2024.xlsx"),
overwrite = TRUE)
ingresos_por_donativos_raw <- read_excel(paste0(tempdir(), "/informe_transparencia_2024.xlsx"),
sheet = "Ingreso por donativos")
transparencia_general_raw <- read_excel(paste0(tempdir(), "/informe_transparencia_2024.xlsx"),
sheet = "Generales") %>%
clean_names()
file.remove(paste0(tempdir(), "/informe_transparencia_2024.xlsx"))
# OSC classifications
drive_download(osc_classified_id,
path = paste0(tempdir(), "/movements_classified_joined.csv"),
overwrite = TRUE)
osc_classified <- read_csv(paste0(tempdir(), "/movements_classified_joined.csv")) %>%
select(rfc, ntee, main_movement)
file.remove(paste0(tempdir(), "/movements_classified_joined.csv"))
View(osc_classified)
test <- osc_classified %>% filter(!is.na(main_movement))
osc_classified <- read_csv(paste0(tempdir(), "/movements_classified_joined.csv")
# OSC classifications
drive_download(osc_classified_id,
path = paste0(tempdir(), "/movements_classified_joined.csv"),
overwrite = TRUE)
osc_classified <- read_csv(paste0(tempdir(), "/movements_classified_joined.csv"))
test <- osc_classified %>% filter(main_movement == "Escuelas/universidades")
View(test)
#
# Author: SW
# Maintainer(s): SW, PB, IS
# License:  Data Cívica 2025 ©
# ---------------------------------------------
# TODO
# Packages
if(!require(pacman)) install.packages("pacman")
pacman::p_load(tidyverse, here, googledrive, readxl, janitor, scales, ggtext)
# Files ====
paths <- list(output = here("descriptives/output/"),
tema = here("descriptives/tema.R"))
drive_auth(email = "sierra.wells@datacivica.org")
# Informe de transparencia 2024
informe_transparencia_id <- drive_ls(as_id("1C1nq47Q8fnMRaVa1wMeZb1ZIpIRl-Pt0")) %>%
filter(str_detect(name, "2024")) %>%
pull(id)
stopifnot(length(informe_transparencia_id) == 1)
# OSC classifications
ntee_id <- drive_ls(as_id("16CVo8XsSrjyMQyoS2g5R-yPIQhV5nGjm")) %>%
filter(str_detect(name, "movements_classified_joined.csv")) %>%
pull(id)
stopifnot(length(ntee_id) == 1)
# NTEE descriptions
ntee_descrip_id <- drive_ls(as_id("1p25pJ15lMJUhtlGQCbb8ADo8vuUueM5J")) %>%
filter(name == "ntee_to_movements_class") %>%
pull(id)
stopifnot(length(ntee_descrip_id) == 1)
# NTEE groupings
ntee_groupings_id <- drive_ls(as_id("1xtTU_ZO8T2mFQoEx-uBHET-VUCbIdZtJ")) %>%
filter(str_detect(name, "2023")) %>%
pull(id)
stopifnot(length(ntee_groupings_id) == 1)
# Movement taxonomy
movements_tax_id <- as_id("1-nvo9AOerfI1DEVdyMvTw_qPsv2IaWJllU87XgDEQSg")
# READ DATA ====
# Informe de transparencia 2024 (Donativos otorgados)
drive_download(informe_transparencia_id,
path = paste0(tempdir(), "/informe_transparenica_2024.xlsx"),
overwrite = TRUE)
donativos_otorgados_raw <- read_excel(paste0(tempdir(), "/informe_transparenica_2024.xlsx"),
sheet = "Donativos otorgados")
transparencia_general_raw <- read_excel(paste0(tempdir(), "/informe_transparenica_2024.xlsx"),
sheet = "Generales")
file.remove(paste0(tempdir(), "/informe_transparenica_2024.xlsx"))
# OSC classifications
drive_download(ntee_id,
path = paste0(tempdir(), "/movements_classified_joined.csv"),
overwrite = TRUE)
osc_classified <- read_csv(paste0(tempdir(), "/movements_classified_joined.csv")) %>%
select(rfc, ntee, main_movement)
file.remove(paste0(tempdir(), "/movements_classified_joined.csv"))
# NTEE descriptions
drive_download(ntee_descrip_id,
path = paste0(tempdir(), "/ntee_descrip.csv"),
overwrite = TRUE)
ntee_descrip <- read_csv(paste0(tempdir(), "/ntee_descrip.csv"))
file.remove(paste0(tempdir(), "/ntee_descrip.csv"))
# NTEE groupings
drive_download(ntee_groupings_id,
path = paste0(tempdir(), "/ntee_groupings.xlsx"),
overwrite = TRUE)
ntee_groupings <- read_excel(paste0(tempdir(), "/ntee_groupings.xlsx"),
sheet = "Agrupación- Descriptiva") %>%
clean_names() %>%
slice(1:11) %>%
select(agrupacion, tematica) %>%
separate_rows(agrupacion, sep = ",")
file.remove(paste0(tempdir(), "/ntee_groupings.xlsx"))
# Movement taxonomy
drive_download(movements_tax_id,
path = paste0(tempdir(), "/movements_tax.csv"),
overwrite = TRUE)
movements_tax <- read_csv(paste0(tempdir(), "/movements_tax.csv")) %>%
clean_names() %>%
select(-descripcion)
file.remove(paste0(tempdir(), "/movements_tax.csv"))
# CLEAN DATA ====
# Informe de transparencia 2024
donativos_otorgados <- donativos_otorgados_raw %>%
clean_names() %>%
rename(
rfc_donante = rfc,
razon_social_donante = razon_social) %>%
select(starts_with("rfc"), starts_with("razon_social"), total) %>%
left_join(osc_classified %>%
rename(ntee_donante = ntee,
movement_donante = main_movement),
by = c("rfc_donante" = "rfc"),
relationship = "many-to-many") %>%
left_join(osc_classified %>%
rename(ntee_destinatario = ntee,
movement_destinatario = main_movement),
by = c("rfc_destinatario" = "rfc"),
relationship = "many-to-many") %>%
left_join(movements_tax, by = c("movement_destinatario" = "sub_tema_intermedio"))
transparencia_general <- transparencia_general_raw %>%
clean_names() %>%
rename(total = total_del_estado_de_ingresos) %>%
left_join(osc_classified, by = "rfc", relationship = "many-to-many") %>%
left_join(movements_tax, by = c("main_movement" = "sub_tema_intermedio"))
# GRAPH PREP ====
caption_informe_transparencia <- "Fuente: Elaboración por Data Cívica a partir del Informe de Transparencia 2024 del SAT"
source(paths$tema)
tema_for_markdown <- tema +
theme(
axis.text.y = element_text(face = "plain"))
# ¿A QUÉ MOVIMIENTOS DONARON LOS DONANTES EN 2024? (TOP 20 vs. OTROS) ====
movimientos_donantes_top_vs_otros <- donativos_otorgados %>%
mutate(top_donantes = ifelse(rfc_donante %in% rfc_top_donantes,
"Top 20 donantes",
"Resto de donantes")) %>%
filter(!is.na(movement_destinatario)) %>%
mutate(
macro_tematica = ifelse(is.na(macro_tematica),
paste0("**", movement_destinatario, "**"),
macro_tematica),
macro_tematica == ifelse(macro_tematica == "Otro tipo de ONG",
"Otro tipo de ONG*",
macro_tematica)) %>%
group_by(top_donantes, macro_tematica) %>%
summarize(total_donado = sum(total, na.rm = T)) %>%
group_by(top_donantes) %>%
mutate(perc = total_donado / sum(total_donado),
macro_tematica = str_wrap(macro_tematica, 40) %>%
str_replace_all("\n", "<br>")) %>%
filter(!str_detect(tolower(macro_tematica), "digitales"))
rfc_top_donantes <- top_donantes$rfc_donante
# ¿QUIÉNES ERAN LOS TOP DONANTES EN 2024?====
top_donantes <- donativos_otorgados %>%
group_by(rfc_donante, razon_social_donante) %>%
summarize(total_donado = sum(total, na.rm = T)) %>%
ungroup() %>%
slice_max(total_donado, n = 20) %>%
mutate(
razon_social_donante = str_remove(razon_social_donante, "SIN TIPO DE SOCIEDAD") %>%
str_replace(., "I A P", "IAP"),
razon_social_donante = str_squish(razon_social_donante),
total_donado_label = dollar(total_donado, scale = 1e-6))
rfc_top_donantes <- top_donantes$rfc_donante
writeLines(rfc_top_donantes, paste0(paths$output, "rfc_top_donantes_2024.txt"))
graf_top_donantes <- top_donantes %>%
ggplot(aes(x = fct_reorder(str_wrap(razon_social_donante, 35), total_donado),
y = total_donado)) +
geom_col(fill = pal[1]) +
geom_label(aes(label = total_donado_label),
hjust = -0.1, size = 3.5, family = labels_font,
fill = "white", label.size = NA, fontface = "bold") +
coord_flip() +
labs(
title = "Top 20 donantes nacionales en 2024",
subtitle = "Por monto total donado (en MDP)",
x = "",
y = "",
caption = caption_informe_transparencia) +
scale_y_continuous(labels = label_dollar(scale = 1e-6),
limits = c(0, max(top_donantes$total_donado * 1.05))) +
tema
# ¿A QUÉ MOVIMIENTOS DONARON LOS DONANTES EN 2024? (TOP 20 vs. OTROS) ====
movimientos_donantes_top_vs_otros <- donativos_otorgados %>%
mutate(top_donantes = ifelse(rfc_donante %in% rfc_top_donantes,
"Top 20 donantes",
"Resto de donantes")) %>%
filter(!is.na(movement_destinatario)) %>%
mutate(
macro_tematica = ifelse(is.na(macro_tematica),
paste0("**", movement_destinatario, "**"),
macro_tematica),
macro_tematica == ifelse(macro_tematica == "Otro tipo de ONG",
"Otro tipo de ONG*",
macro_tematica)) %>%
group_by(top_donantes, macro_tematica) %>%
summarize(total_donado = sum(total, na.rm = T)) %>%
group_by(top_donantes) %>%
mutate(perc = total_donado / sum(total_donado),
macro_tematica = str_wrap(macro_tematica, 40) %>%
str_replace_all("\n", "<br>")) %>%
filter(!str_detect(tolower(macro_tematica), "digitales"))
movimientos_donantes_top_order <- movimientos_donantes_top_vs_otros %>%
filter(top_donantes == "Top 20 donantes") %>%
arrange(perc) %>%
pull(macro_tematica)
graf_movimientos_donantes_top_vs_otros <- movimientos_donantes_top_vs_otros %>%
ggplot(aes(x = perc,
y = factor(macro_tematica,
levels = movimientos_donantes_top_order),
fill = top_donantes)) +
geom_col(position = "dodge") +
geom_label(aes(label = percent(perc, accuracy = 0.1), color = top_donantes),
position = position_dodge(width = 0.9), hjust = -0.1, size = 3.5,
fontface = "bold", fill = "white", label.size = NA, family = labels_font) +
labs(
title = "¿A qué tipo de OSC donaron los donantes nacionales en 2024?",
subtitle = paste0("Porcentaje del total donado por cada grupo de donantes",
"<br>OSC no pertenicientes a un movimiento social/político en **negritas**"),
x = "",
y = "",
fill = "",
caption = paste0(caption_informe_transparencia,
"\n*'Otro tipo de ONG' incluye OSC que no pertenecen a ningún movimiento específico.")) +
scale_x_continuous(labels = label_percent(accuracy = 0.1),
limits = c(0, max(movimientos_donantes_top_vs_otros$perc * 1.05))) +
scale_fill_manual(values = pal) +
scale_color_manual(values = pal, guide = "none") +
tema_for_markdown +
guides(fill = guide_legend(reverse = TRUE, nrow = 1)) +
theme(
legend.position = "top",
axis.text.x = element_blank(),
axis.ticks.x = element_blank(),
axis.text.y = element_markdown(),
plot.subtitle = element_markdown())
graf_movimientos_donantes_top_vs_otros
for (device in devices){
ggsave(filename = paste0(paths$output, "movimientos_donantes_top_vs_otros.", device),
plot = graf_movimientos_donantes_top_vs_otros,
width = 12, height = 10)
walk(paste0(paths$output, "movimientos_donantes_top_vs_otros.", device),
~add_both_logos(.x, escala = 7))
}
# DISTRIBUCIÓN DE DONATARIOS ====
dist_donatarios <- transparencia_general %>%
group_by(rfc, razon_social) %>%
summarize(total_ingresos = sum(total, na.rm = T)) %>%
filter(total_ingresos > 0,
! rfc %in% rfc_donantes) %>%
mutate(
donatario_group = case_when(
total_ingresos < 1e6 ~ "Menos de 1 MDP",
total_ingresos <= 5e6 ~ "1-5 MDP",
total_ingresos <= 1e7 ~ "5-10 MDP",
total_ingresos <= 5e7 ~ "10-50 MDP",
total_ingresos <= 1e8 ~ "50-100 MDP",
total_ingresos > 1e8 ~ "Más de 100 MDP"),
donatario_group = factor(donatario_group,
levels = c("Menos de 1 MDP", "1-5 MDP","5-10 MDP",
"10-50 MDP", "50-100 MDP",
"Más de 100 MDP"))) %>%
group_by(donatario_group) %>%
summarize(n_osc = n()) %>%
ungroup() %>%
mutate(perc = n_osc / sum(n_osc))
rfc_donantes <- donativos_otorgados %>%
group_by(rfc_donante, razon_social_donante) %>%
summarize(total_donado = sum(total, na.rm = T)) %>%
filter(total_donado > 1e6) %>%
pull(rfc_donante)
# DISTRIBUCIÓN DE DONATARIOS ====
dist_donatarios <- transparencia_general %>%
group_by(rfc, razon_social) %>%
summarize(total_ingresos = sum(total, na.rm = T)) %>%
filter(total_ingresos > 0,
! rfc %in% rfc_donantes) %>%
mutate(
donatario_group = case_when(
total_ingresos < 1e6 ~ "Menos de 1 MDP",
total_ingresos <= 5e6 ~ "1-5 MDP",
total_ingresos <= 1e7 ~ "5-10 MDP",
total_ingresos <= 5e7 ~ "10-50 MDP",
total_ingresos <= 1e8 ~ "50-100 MDP",
total_ingresos > 1e8 ~ "Más de 100 MDP"),
donatario_group = factor(donatario_group,
levels = c("Menos de 1 MDP", "1-5 MDP","5-10 MDP",
"10-50 MDP", "50-100 MDP",
"Más de 100 MDP"))) %>%
group_by(donatario_group) %>%
summarize(n_osc = n()) %>%
ungroup() %>%
mutate(perc = n_osc / sum(n_osc))
n_donatarios <- sum(dist_donatarios$n_osc)
n_groups_donatarios <- n_distinct(dist_donatarios$donatario_group)
graf_dist_donatarios <- dist_donatarios %>%
ggplot(aes(x = "fake",
y = n_osc,
fill = fct_rev(donatario_group),
color = fct_rev(donatario_group))) +
geom_col(position = "stack", width = 1.5) +
geom_label(aes(label = paste0(donatario_group, ": ", comma(n_osc), " OSC (", percent(perc, accuracy = 0.1), ")")),
size = 4, position = position_stack(vjust = 0.5), family = labels_font,
fill = "white", fontface = "bold") +
labs(
title = "¿Cuántos ingresos tienen las donatarias autorizadas?",
subtitle = paste0("Total del estado de ingresos en 2024"),
x = "",
y = "",
caption = paste0(caption_informe_transparencia,
"\nSe excluyen donantes que donaron más de 1 MDP en 2024")) +
tema +
scale_fill_manual(values = rev(pal[1:n_groups_donatarios])) +
scale_color_manual(values = rev(pal[1:n_groups_donatarios]), guide = "none") +
guides(fill = guide_legend(reverse = TRUE, nrow = 1)) +
theme(
axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
axis.line = element_blank(),
legend.position = "none")
for (device in devices){
ggsave(filename = paste0(paths$output, "dist_donatarios.", device),
plot = graf_dist_donatarios,
width = 12, height = 10)
walk(paste0(paths$output, "dist_donatarios.", device),
~add_both_logos(.x, escala = 7))
}
# ¿A QUÉ MOVIMIENTOS DONARON LOS DONANTES EN 2024? (TOP 20 vs. OTROS) ====
movimientos_donantes_nacionales <- donativos_otorgados %>%
filter(!is.na(movement_destinatario)) %>%
mutate(
macro_tematica = ifelse(is.na(macro_tematica),
paste0("**", movement_destinatario, "**"),
macro_tematica),
macro_tematica == ifelse(macro_tematica == "Otro tipo de ONG",
"Otro tipo de ONG*",
macro_tematica)) %>%
group_by(macro_tematica) %>%
summarize(total_donado = sum(total, na.rm = T)) %>%
ungroup() %>%
mutate(perc = total_donado / sum(total_donado),
macro_tematica = str_wrap(macro_tematica, 40))
View(movimientos_donantes_nacionales)
2.540109e-03 * 100
graf_movimientos_donantes_nacionales <- movimientos_donantes_nacionales %>%
ggplot(aes(x = perc,
y = fct_reorder(macro_tematica, perc))) +
geom_col(fill = pal[1]) +
geom_label(aes(label = percent(perc, accuracy = 0.1)),
hjust = -0.1, size = 3.5, family = labels_font,
fill = "white", label.size = NA, fontface = "bold") +
labs(
title = "¿A qué tipo de OSC donaron los donantes nacionales en 2024?",
subtitle = "Porcentaje del total donado",
x = "",
y = "",
caption = paste0(caption_informe_transparencia,
"\n*'Otro tipo de ONG' incluye OSC que no pertenecen a ningún movimiento específico.")) +
scale_x_continuous(labels = label_percent(accuracy = 0.1),
limits = c(0, max(movimientos_donantes_nacionales$perc * 1.05))) +
tema_for_markdown +
theme(
axis.text.y = element_markdown(),
plot.subtitle = element_markdown())
graf_movimientos_donantes_nacionales
# ¿A QUÉ MOVIMIENTOS DONARON LOS DONANTES EN 2024? (GENERAL) ====
movimientos_donantes_nacionales <- donativos_otorgados %>%
filter(!is.na(movement_destinatario)) %>%
mutate(
macro_tematica = ifelse(is.na(macro_tematica),
paste0("**", movement_destinatario, "**"),
macro_tematica),
macro_tematica == ifelse(macro_tematica == "Otro tipo de ONG",
"Otro tipo de ONG*",
macro_tematica)) %>%
group_by(macro_tematica) %>%
summarize(total_donado = sum(total, na.rm = T)) %>%
ungroup() %>%
mutate(perc = total_donado / sum(total_donado),
macro_tematica = str_wrap(macro_tematica, 40) %>%
str_replace_all("\n", "<br>")) %>%
filter(!str_detect(tolower(macro_tematica), "digitales"))
graf_movimientos_donantes_nacionales <- movimientos_donantes_nacionales %>%
ggplot(aes(x = perc,
y = fct_reorder(macro_tematica, perc))) +
geom_col(fill = pal[1]) +
geom_label(aes(label = percent(perc, accuracy = 0.1)),
hjust = -0.1, size = 3.5, family = labels_font,
fill = "white", label.size = NA, fontface = "bold") +
labs(
title = "¿A qué tipo de OSC donaron los donantes nacionales en 2024?",
subtitle = "Porcentaje del total donado",
x = "",
y = "",
caption = paste0(caption_informe_transparencia,
"\n*'Otro tipo de ONG' incluye OSC que no pertenecen a ningún movimiento específico.")) +
scale_x_continuous(labels = label_percent(accuracy = 0.1),
limits = c(0, max(movimientos_donantes_nacionales$perc * 1.05))) +
tema_for_markdown +
theme(
axis.text.y = element_markdown(),
plot.subtitle = element_markdown())
graf_movimientos_donantes_nacionales
for (device in devices){
ggsave(filename = paste0(paths$output, "movimientos_donantes_nacionales.", device),
plot = graf_movimientos_donantes_nacionales,
width = 12, height = 10)
walk(paste0(paths$output, "movimientos_donantes_nacionales.", device),
~add_both_logos(.x, escala = 7))
}
